# 自动化与RAG集成完成

## 🎯 任务总结
已完成自动化调度器与 `run.py` 的集成，现在可以通过单一入口管理所有任务。

### 1. 新增功能
- **`--auto-schedule`**: 启动全自动守护进程，托管爬取、维护和RAG更新任务。

### 2. 集成细节
- `run.py` 现在是真正的**统一入口**，支持：
  - 基础爬虫 (`--spider`)
  - 关键词扩展 (`--expand`)
  - 工作流 (`--workflow`)
  - 向量库管理 (`--build-vector`, `--search`)
  - **自动化托管** (`--auto-schedule`)

### 3. 使用方式
启动自动化任务（建议在 screen/tmux 或 nohup 中运行）：
```bash
python run.py --auto-schedule
```

该模式会持续运行，并按以下时间表自动执行：
- **02:00**: 关键词生命周期维护（发现新词、归档旧词）
- **03:00**: 执行城市维度的增量爬取
- **06:00**: 重建向量数据库，确保 RAG 检索到最新数据

### 4. 下一步建议
- 监控 `logs/scheduler.log` 以确保任务按计划执行。
- 随着数据量增长（\>10万条），可以考虑将 `job_rebuild_rag` 优化为增量更新模式。
